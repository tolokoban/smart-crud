{"intl":"","src":"require( 'test.page-login', function(exports, module) {  /**********************************************************************\r\n require( 'test.page-login' )\r\n -----------------------------------------------------------------------\r\n\r\n **********************************************************************/\r\nvar $ = require(\"dom\");\r\nvar WS = require(\"tfw.web-service\");\r\n\r\n// Tracking connection changes.\r\nWS.changeEvent.add(function() {\r\n    if( !WS.user ) {\r\n        // Nobody is connected. We must go to the login page.\r\n        window.location.hash = \"/test/login\";\r\n    }\r\n});\r\n\r\n\r\nfunction PageLogin() {\r\n    var that = this;\r\n\r\n    var att, id;\r\n    var attributes = {\r\n        username: \"login.username\",\r\n        password: \"login.password\",\r\n        btnOK: \"login.btnOK\"\r\n    };\r\n    for( att in attributes ) {\r\n        id = attributes[att];\r\n        Object.defineProperty( this, att, {\r\n            value: document.getElementById( id ),\r\n            writable: false,\r\n            enumerable: true,\r\n            configurable: false\r\n        });\r\n    }\r\n\r\n    $.on( this.btnOK, function() {\r\n        WS.login( that.username.valu , that.password.value ).then(\r\n            function( user ) {\r\n                console.info(\"[main.page-login] user=...\", user);\r\n                window.location.hash = \"/test/menu\";\r\n            },\r\n            function( err ) {\r\n                console.info(\"[main.page-login] err=...\", err);\r\n                alert( err );\r\n            }\r\n        );\r\n    });\r\n}\r\n\r\n\r\n/**\r\n * @return void\r\n */\r\nPageLogin.prototype.activate = function() {\r\n    this.username.value = \"\";\r\n    this.password.value = \"\";\r\n};\r\n\r\n\r\nmodule.exports = PageLogin;\r\n });\r\n","zip":"require(\"test.page-login\",function(e,n){function o(){var e,n,o=this,a={username:\"login.username\",password:\"login.password\",btnOK:\"login.btnOK\"};for(e in a)n=a[e],Object.defineProperty(this,e,{value:document.getElementById(n),writable:!1,enumerable:!0,configurable:!1});t.on(this.btnOK,function(){i.login(o.username.valu,o.password.value).then(function(e){console.info(\"[main.page-login] user=...\",e),window.location.hash=\"/test/menu\"},function(e){console.info(\"[main.page-login] err=...\",e),alert(e)})})}var t=require(\"dom\"),i=require(\"tfw.web-service\");i.changeEvent.add(function(){i.user||(window.location.hash=\"/test/login\")}),o.prototype.activate=function(){this.username.value=\"\",this.password.value=\"\"},n.exports=o});\n//# sourceMappingURL=test.page-login.js.map","map":{"version":3,"file":"test.page-login.js.map","sources":["test.page-login.js"],"sourcesContent":["require( 'test.page-login', function(exports, module) {  /**********************************************************************\r\n require( 'test.page-login' )\r\n -----------------------------------------------------------------------\r\n\r\n **********************************************************************/\r\nvar $ = require(\"dom\");\r\nvar WS = require(\"tfw.web-service\");\r\n\r\n// Tracking connection changes.\r\nWS.changeEvent.add(function() {\r\n    if( !WS.user ) {\r\n        // Nobody is connected. We must go to the login page.\r\n        window.location.hash = \"/test/login\";\r\n    }\r\n});\r\n\r\n\r\nfunction PageLogin() {\r\n    var that = this;\r\n\r\n    var att, id;\r\n    var attributes = {\r\n        username: \"login.username\",\r\n        password: \"login.password\",\r\n        btnOK: \"login.btnOK\"\r\n    };\r\n    for( att in attributes ) {\r\n        id = attributes[att];\r\n        Object.defineProperty( this, att, {\r\n            value: document.getElementById( id ),\r\n            writable: false,\r\n            enumerable: true,\r\n            configurable: false\r\n        });\r\n    }\r\n\r\n    $.on( this.btnOK, function() {\r\n        WS.login( that.username.valu , that.password.value ).then(\r\n            function( user ) {\r\n                console.info(\"[main.page-login] user=...\", user);\r\n                window.location.hash = \"/test/menu\";\r\n            },\r\n            function( err ) {\r\n                console.info(\"[main.page-login] err=...\", err);\r\n                alert( err );\r\n            }\r\n        );\r\n    });\r\n}\r\n\r\n\r\n/**\r\n * @return void\r\n */\r\nPageLogin.prototype.activate = function() {\r\n    this.username.value = \"\";\r\n    this.password.value = \"\";\r\n};\r\n\r\n\r\nmodule.exports = PageLogin;\r\n });\r\n"],"names":["require","exports","module","PageLogin","att","id","that","this","attributes","username","password","btnOK","Object","defineProperty","value","document","getElementById","writable","enumerable","configurable","$","on","WS","login","valu","then","user","console","info","window","location","hash","err","alert","changeEvent","add","prototype","activate"],"mappings":"AAAAA,QAAS,kBAAmB,SAASC,EAASC,GAiB9C,QAASC,KACL,GAEIC,GAAKC,EAFLC,EAAOC,KAGPC,GACAC,SAAU,iBACVC,SAAU,iBACVC,MAAO,cAEX,KAAKP,IAAOI,GACRH,EAAKG,EAAWJ,GAChBQ,OAAOC,eAAgBN,KAAMH,GACzBU,MAAOC,SAASC,eAAgBX,GAChCY,UAAU,EACVC,YAAY,EACZC,cAAc,GAItBC,GAAEC,GAAId,KAAKI,MAAO,WACdW,EAAGC,MAAOjB,EAAKG,SAASe,KAAOlB,EAAKI,SAASI,OAAQW,KACjD,SAAUC,GACNC,QAAQC,KAAK,6BAA8BF,GAC3CG,OAAOC,SAASC,KAAO,cAE3B,SAAUC,GACNL,QAAQC,KAAK,4BAA6BI,GAC1CC,MAAOD,OAvCvB,GAAIZ,GAAIpB,QAAQ,OACZsB,EAAKtB,QAAQ,kBAGjBsB,GAAGY,YAAYC,IAAI,WACVb,EAAGI,OAEJG,OAAOC,SAASC,KAAO,iBA0C/B5B,EAAUiC,UAAUC,SAAW,WAC3B9B,KAAKE,SAASK,MAAQ,GACtBP,KAAKG,SAASI,MAAQ,IAI1BZ,EAAOD,QAAUE"},"dependencies":["mod/test.page-login","mod/dom","mod/tfw.web-service"]}